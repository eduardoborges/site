---
import Base from '../layouts/Base.astro';
import { getCollection } from 'astro:content';

const posts = (await getCollection('posts'))
  .filter(p => !p.data.draft && !p.data.hidden)
  .sort((a, b) => b.data.date.getTime() - a.data.date.getTime());

const formatDate = (date: Date) =>
  date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
---

<Base title="Eduardo" ogImage="/me.jpeg">
  <main>
    <div class="hero">
      <h1>Eduardo Borges<span class="hero-dot">.</span></h1>
      <p>
        Staff Engineer <strong>@</strong> <a href="https://www.solfacil.com.br" target="_blank" rel="noopener noreferrer">Solfácil</a>,
        tornando a energia solar acessível a todos os brasileiros.
        Antes disso, Staff Engineer <strong>@</strong> <a href="https://www.stone.co" target="_blank" rel="noopener noreferrer">Stone.Co</a>,
        revolucionando o mercado de pagamentos, crédito e bancário no Brasil.
      </p>
      <p><strong>Brasileiro. Baiano. <a href="https://pt.wikipedia.org/wiki/Vaqueiro" target="_blank" rel="noopener noreferrer">Ex-vaqueiro</a></strong>.</p>

      <div class="hero-links">
        <a href="https://linkedin.com/in/euduardoborges" target="_blank" rel="noopener noreferrer">linkedin</a>
        <span class="separator">·</span>
        <a href="https://github.com/eduardoborges" target="_blank" rel="noopener noreferrer">github</a>
      </div>
    </div>

    <p class="now-playing">
      ouvindo <a href="" id="last-played">bip bop carregando...</a>
      <small>· rastreado por lastfm</small>
    </p>

    <h3>postagens do blog</h3>
    {posts.map(post => (
      <li class="post">
        <a href={`/posts/${post.data.slug || post.id}`}>{post.data.title}</a>
        <time class="meta" datetime={post.data.date.toISOString()}>{formatDate(post.data.date)}</time>
      </li>
    ))}
  </main>

  <script is:inline src="/main.js"></script>
</Base>
